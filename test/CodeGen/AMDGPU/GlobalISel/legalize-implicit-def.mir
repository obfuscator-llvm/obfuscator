# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=amdgcn-mesa-mesa3d -run-pass=legalizer %s -o - | FileCheck %s

# FIXME: Need to add test for IMPLICIT_DEF > 512 once all the operations used
# to legalize IMPLICIT_DEF are leagl.

---
name:            test_implicit_def
body: |
  bb.0:
    liveins: $vgpr0, $vgpr1

    ; CHECK-LABEL: name: test_implicit_def
    ; CHECK: [[DEF:%[0-9]+]]:_(s448) = G_IMPLICIT_DEF
    ; CHECK: [[EXTRACT:%[0-9]+]]:_(s32) = G_EXTRACT [[DEF]](s448), 0
    ; CHECK: $vgpr0 = COPY [[EXTRACT]](s32)
    %0:_(s448) = G_IMPLICIT_DEF
    %1:_(s32) = G_EXTRACT %0, 0
    $vgpr0 = COPY %1
...
